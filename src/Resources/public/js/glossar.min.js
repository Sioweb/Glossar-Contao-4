!function(a){function e(){var e=this.href,o=a(this).data("glossar");a.ajax({type:"POST",url:"index.php",data:{isAjaxRequest:1,clicked:1,no_ref:""===e?1:0,glossar:1,id:o,REQUEST_TOKEN:Contao.request_token}})}function o(o){var s=!1,u=o.data("maxwidth");o.data("maxheight");s=o.offset().left+u<a(window).width(),n&&n.abort(),n=a.ajax({type:"POST",url:"index.php",data:{glossar:1,isAjaxRequest:1,id:o.data("glossar"),objPageUrl:Contao.objPageUrl,REQUEST_TOKEN:Contao.request_token},success:function(n){i=setTimeout(function(){c=o.data("glossar"),d=!0,r.addClass("layer_loaded").append(a(a.parseJSON(n).content)),r.append('<div class="ce_glossar_close">Ã—</div>').children(".ce_glossar_close").click(function(){t()}),r.find(".glossar_layer_link").click(e),s||r.css({left:"auto",right:20}),r.offset().top+r.height()>a(window).height()+a(window).scrollTop()&&r.css({top:"auto",bottom:20,position:"fixed"}),a(".ce_glossar_layer").mouseenter(function(){clearTimeout(l)}).mouseleave(function(){l=setTimeout(t,750)})},1e3)}})}function t(){clearTimeout(l),clearTimeout(i),d&&a.ajax({type:"POST",url:"index.php",data:{loaded:1,glossar:1,id:c,isAjaxRequest:1,objPageUrl:Contao.objPageUrl,REQUEST_TOKEN:Contao.request_token}}),a(".layer_loading,.ce_glossar_close").remove(),r.css({position:"absolute"}).removeClass("layer_loaded layer_load").children(".ce_glossar_layer").remove(),c=d=!1}var s=!1,i=!1,l=!1,n=!1,r=!1,d=!1,c=!1;a(function(){r=a("body").append('<div class="glossar_layer">').find(".glossar_layer"),a(".tagcloud a").click(function(e){a.ajax({type:"POST",url:"index.php",data:{glossar:1,isAjaxRequest:1,cloud:a(this).data("page"),REQUEST_TOKEN:Contao.request_token}})}),a("span.glossar,a.glossar").each(function(e,i){a(i).mouseenter(function(e){var i=a(this);clearTimeout(s),t(),r.append('<div class="layer_loading"><div class="layer_ring"></div><div class="layer_content"><span></span></div></div>'),r.addClass("layer_load").css({top:i.offset().top-20,left:i.offset().left-Math.round(1.2*r.width()),"max-width":i.data("maxwidth"),"max-height":i.data("maxheight")}),s=setTimeout(function(){o(i)},450)}).mouseout(function(){clearTimeout(s),l=setTimeout(t,200)})}),a("a.glossar").click(e)})}(jQuery);